{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{Heart,ShoppingCart}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchResults=()=>{const[results,setResults]=useState([]);const[message,setMessage]=useState(\"\");const location=useLocation();useEffect(()=>{var _location$state,_location$state2;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.results){setResults(location.state.results);}if((_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.error){setMessage(\"\\u274C \".concat(location.state.error));setTimeout(()=>setMessage(\"\"),3000);}},[location]);const handleAddToCart=async id=>{const userId=localStorage.getItem(\"userId\");const token=localStorage.getItem(\"userToken\");if(!userId||!token){setMessage(\"⚠️ Please log in to add items to the cart.\");return;}try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/add\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId,productId:id})});const data=await response.json();if(response.ok){setMessage(\"✅ Item added to cart successfully!\");}else{setMessage(\"\\u274C \".concat(data.message||\"Error adding to cart\"));}}catch(error){console.error(\"Error adding to cart:\",error);setMessage(\"❌ Server error while adding to cart.\");}setTimeout(()=>setMessage(\"\"),3000);};const handleAddToWishlist=async id=>{const token=localStorage.getItem(\"userToken\");if(!token){setMessage(\"⚠️ Please log in to add items to your wishlist.\");return;}try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/wishlist/add/\").concat(id),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)}});const data=await response.json();if(response.ok){setMessage(\"❤️ Added to wishlist!\");}else{setMessage(\"\\u274C \".concat(data.message||\"Failed to add to wishlist.\"));}}catch(error){console.error(\"Error adding to wishlist:\",error);setMessage(\"❌ Server error while adding to wishlist.\");}setTimeout(()=>setMessage(\"\"),3000);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen mt-[110px] bg-[#FAF6F0] py-12 px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-10 left-10 w-24 h-24 bg-[#B76E79]/10 rounded-full blur-xl\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-16 right-16 w-32 h-32 bg-[#C5A880]/10 rounded-full blur-xl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-serif text-[#6B4E4D] mb-8\",children:\"Search Results\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-[#6B4E4D] mb-6 transition-all duration-300\",children:message}),results.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 bg-white/80 backdrop-blur-sm rounded-xl border border-[#E0D6CC] shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-[#6B4E4D]/70 text-lg\",children:\"No magical items found matching your search...\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:results.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"group bg-white/90 backdrop-blur-sm rounded-xl border border-[#E0D6CC] shadow-sm hover:shadow-md transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative aspect-square overflow-hidden rounded-t-xl\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.images[0],alt:product.name,className:\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-t from-[#6B4E4D]/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-serif text-[#6B4E4D] mb-2\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[#B76E79] font-medium mb-4\",children:[\"\\u20B9\",product.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAddToCart(product._id),className:\"flex-1 flex items-center justify-center gap-2 py-2 bg-[#B76E79] text-white rounded-lg hover:bg-[#B76E79]/90 transition-colors\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add to Cart\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToWishlist(product._id),className:\"p-2 text-[#6B4E4D] hover:text-[#B76E79] border border-[#E0D6CC] rounded-lg hover:border-[#B76E79] transition-colors\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5\"})})]})]})]},product._id))})]})]});};export default SearchResults;","map":{"version":3,"names":["useEffect","useState","useLocation","Heart","ShoppingCart","jsx","_jsx","jsxs","_jsxs","SearchResults","results","setResults","message","setMessage","location","_location$state","_location$state2","state","error","concat","setTimeout","handleAddToCart","id","userId","localStorage","getItem","token","response","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","body","JSON","stringify","productId","data","json","ok","console","handleAddToWishlist","className","children","length","map","product","src","images","alt","name","price","toFixed","onClick","_id"],"sources":["E:/projects/web/my-app/Frontend/src/pages/searchResults.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Heart, ShoppingCart } from \"lucide-react\";\r\n\r\nconst SearchResults = () => {\r\n  const [results, setResults] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    if (location.state?.results) {\r\n      setResults(location.state.results);\r\n    }\r\n    if (location.state?.error) {\r\n      setMessage(`❌ ${location.state.error}`);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleAddToCart = async (id) => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    const token = localStorage.getItem(\"userToken\");\r\n\r\n    if (!userId || !token) {\r\n      setMessage(\"⚠️ Please log in to add items to the cart.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/cart/add`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ userId, productId: id }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setMessage(\"✅ Item added to cart successfully!\");\r\n      } else {\r\n        setMessage(`❌ ${data.message || \"Error adding to cart\"}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding to cart:\", error);\r\n      setMessage(\"❌ Server error while adding to cart.\");\r\n    }\r\n\r\n    setTimeout(() => setMessage(\"\"), 3000);\r\n  };\r\n\r\n  const handleAddToWishlist = async (id) => {\r\n    const token = localStorage.getItem(\"userToken\");\r\n\r\n    if (!token) {\r\n      setMessage(\"⚠️ Please log in to add items to your wishlist.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_API_URL}/api/wishlist/add/${id}`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setMessage(\"❤️ Added to wishlist!\");\r\n      } else {\r\n        setMessage(`❌ ${data.message || \"Failed to add to wishlist.\"}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding to wishlist:\", error);\r\n      setMessage(\"❌ Server error while adding to wishlist.\");\r\n    }\r\n\r\n    setTimeout(() => setMessage(\"\"), 3000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen mt-[110px] bg-[#FAF6F0] py-12 px-4 sm:px-6 lg:px-8\">\r\n      {/* Floating Decorative Elements */}\r\n      <div className=\"fixed top-10 left-10 w-24 h-24 bg-[#B76E79]/10 rounded-full blur-xl\"></div>\r\n      <div className=\"fixed bottom-16 right-16 w-32 h-32 bg-[#C5A880]/10 rounded-full blur-xl\"></div>\r\n\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <h1 className=\"text-3xl font-serif text-[#6B4E4D] mb-8\">Search Results</h1>\r\n\r\n        {message && (\r\n          <div className=\"text-center text-[#6B4E4D] mb-6 transition-all duration-300\">\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        {results.length === 0 ? (\r\n          <div className=\"text-center py-12 bg-white/80 backdrop-blur-sm rounded-xl border border-[#E0D6CC] shadow-sm\">\r\n            <div className=\"text-[#6B4E4D]/70 text-lg\">\r\n              No magical items found matching your search...\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n            {results.map((product) => (\r\n              <div\r\n                key={product._id}\r\n                className=\"group bg-white/90 backdrop-blur-sm rounded-xl border border-[#E0D6CC] shadow-sm hover:shadow-md transition-all duration-300\"\r\n              >\r\n                {/* Image Container */}\r\n                <div className=\"relative aspect-square overflow-hidden rounded-t-xl\">\r\n                  <img\r\n                    src={product.images[0]}\r\n                    alt={product.name}\r\n                    className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\"\r\n                  />\r\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-[#6B4E4D]/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\r\n                </div>\r\n\r\n                {/* Product Info */}\r\n                <div className=\"p-6\">\r\n                  <h3 className=\"text-lg font-serif text-[#6B4E4D] mb-2\">\r\n                    {product.name}\r\n                  </h3>\r\n                  <p className=\"text-[#B76E79] font-medium mb-4\">\r\n                    ₹{product.price.toFixed(2)}\r\n                  </p>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"flex gap-4\">\r\n                    <button\r\n                      onClick={() => handleAddToCart(product._id)}\r\n                      className=\"flex-1 flex items-center justify-center gap-2 py-2 bg-[#B76E79] text-white rounded-lg hover:bg-[#B76E79]/90 transition-colors\"\r\n                    >\r\n                      <ShoppingCart className=\"w-4 h-4\" />\r\n                      <span>Add to Cart</span>\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleAddToWishlist(product._id)}\r\n                      className=\"p-2 text-[#6B4E4D] hover:text-[#B76E79] border border-[#E0D6CC] rounded-lg hover:border-[#B76E79] transition-colors\"\r\n                    >\r\n                      <Heart className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchResults;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}