{"ast":null,"code":"import _objectSpread from\"E:/projects/web/my-app/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Path: frontend/src/admin/pages/orders/OrderList.jsx\nimport{FiCheck,FiEye}from\"react-icons/fi\";import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderList(){const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchOrders=async()=>{try{const token=localStorage.getItem(\"adminToken\");const{data}=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/orders\"),{headers:{Authorization:\"Bearer \".concat(token)}});setOrders(data);}catch(err){setError(\"Failed to load orders\");}finally{setLoading(false);}};fetchOrders();},[]);const handleConfirm=async orderId=>{try{const token=localStorage.getItem(\"adminToken\");await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/admin/orders/\").concat(orderId,\"/confirm\"),{},{headers:{Authorization:\"Bearer \".concat(token)}});setOrders(prevOrders=>prevOrders.map(order=>order._id===orderId?_objectSpread(_objectSpread({},order),{},{status:\"completed\"}):order));}catch(error){console.error(\"Error confirming order:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-rose-25 ml-64\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-serif font-bold text-rose-800\",children:\"Order Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-amber-900/80\",children:\"View and manage customer orders\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-amber-900/80\",children:\"Loading orders...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-rose-100\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-rose-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Payment ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-rose-50\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-rose-50/50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\",children:order._id}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-amber-900\",children:order.user.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-amber-900/60\",children:[\"ID: \",order.user]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-rose-800 font-medium\",children:order.totalAmount}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\",children:order.paymentId}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(order.orderStatus===\"confirmed\"?\"bg-green-100 text-green-800\":order.orderStatus===\"pending\"?\"bg-amber-100 text-amber-800\":\"bg-gray-100 text-gray-800\"),children:order.orderStatus})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/orders/\".concat(order._id),className:\"inline-flex items-center text-rose-700 hover:text-rose-900\",title:\"View Details\",children:[/*#__PURE__*/_jsx(FiEye,{className:\"mr-1\"}),\" View\"]}),order.orderStatus===\"pending\"&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleConfirm(order._id),className:\"inline-flex items-center text-green-600 hover:text-green-800\",title:\"Confirm Order\",children:[/*#__PURE__*/_jsx(FiCheck,{className:\"mr-1\"}),\" Confirm\"]})]})]},order._id))})]})})]});}","map":{"version":3,"names":["FiCheck","FiEye","Link","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","OrderList","orders","setOrders","loading","setLoading","error","setError","fetchOrders","token","localStorage","getItem","data","get","concat","process","env","REACT_APP_API_URL","headers","Authorization","err","handleConfirm","orderId","put","prevOrders","map","order","_id","_objectSpread","status","console","className","children","user","name","totalAmount","paymentId","orderStatus","to","title","onClick"],"sources":["E:/projects/web/my-app/Frontend/src/admin/orders/OrderList.jsx"],"sourcesContent":["// Path: frontend/src/admin/pages/orders/OrderList.jsx\r\nimport { FiCheck, FiEye } from \"react-icons/fi\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function OrderList() {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"adminToken\");\r\n        const { data } = await axios.get(\r\n          `${process.env.REACT_APP_API_URL}/api/orders`,\r\n          {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }\r\n        );\r\n\r\n        setOrders(data);\r\n      } catch (err) {\r\n        setError(\"Failed to load orders\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const handleConfirm = async (orderId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"adminToken\");\r\n      await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/admin/orders/${orderId}/confirm`,\r\n        {},\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      setOrders((prevOrders) =>\r\n        prevOrders.map((order) =>\r\n          order._id === orderId ? { ...order, status: \"completed\" } : order\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error confirming order:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-rose-25 ml-64\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-2xl font-serif font-bold text-rose-800\">\r\n          Order Management\r\n        </h1>\r\n        <p className=\"text-amber-900/80\">View and manage customer orders</p>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p className=\"text-amber-900/80\">Loading orders...</p>\r\n      ) : error ? (\r\n        <p className=\"text-red-500\">{error}</p>\r\n      ) : (\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden\">\r\n          <table className=\"min-w-full divide-y divide-rose-100\">\r\n            <thead className=\"bg-rose-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Order ID\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Customer\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Amount\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Payment ID\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-rose-50\">\r\n              {orders.map((order) => (\r\n                <tr key={order._id} className=\"hover:bg-rose-50/50\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\">\r\n                    {order._id}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm text-amber-900\">\r\n                      {order.user.name}\r\n                    </div>\r\n                    <div className=\"text-xs text-amber-900/60\">\r\n                      ID: {order.user}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-rose-800 font-medium\">\r\n                    {order.totalAmount}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\">\r\n                    {order.paymentId}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <span\r\n                      className={`px-2 py-1 text-xs rounded-full ${\r\n                        order.orderStatus === \"confirmed\"\r\n                          ? \"bg-green-100 text-green-800\"\r\n                          : order.orderStatus === \"pending\"\r\n                          ? \"bg-amber-100 text-amber-800\"\r\n                          : \"bg-gray-100 text-gray-800\"\r\n                      }`}\r\n                    >\r\n                      {order.orderStatus}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2\">\r\n                    <Link\r\n                      to={`/admin/orders/${order._id}`}\r\n                      className=\"inline-flex items-center text-rose-700 hover:text-rose-900\"\r\n                      title=\"View Details\"\r\n                    >\r\n                      <FiEye className=\"mr-1\" /> View\r\n                    </Link>\r\n                    {order.orderStatus === \"pending\" && (\r\n                      <button\r\n                        onClick={() => handleConfirm(order._id)}\r\n                        className=\"inline-flex items-center text-green-600 hover:text-green-800\"\r\n                        title=\"Confirm Order\"\r\n                      >\r\n                        <FiCheck className=\"mr-1\" /> Confirm\r\n                      </button>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}