{"ast":null,"code":"// Path: frontend/src/admin/pages/users/UserCart.jsx\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import{FiEdit,FiTrash2,FiChevronLeft}from\"react-icons/fi\";import{Link,useParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserCart(){const{userId}=useParams();const[cartItems,setCartItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const token=localStorage.getItem(\"adminToken\");useEffect(()=>{const fetchCart=async()=>{try{setLoading(true);// Set loading to true before API call\nconst{data}=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/admin/users/\").concat(userId,\"/cart\"),// Correct path\n{headers:{Authorization:\"Bearer \".concat(token)}});setCartItems(data.items);setError(\"\");// Clear previous errors\n}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Failed to fetch cart.\");}finally{setLoading(false);// Ensure loading stops\n}};fetchCart();},[userId,token]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading cart...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-rose-25 ml-64\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(Link,{to:\"/admin/users\",className:\"flex items-center gap-2 text-amber-900 hover:text-rose-800\",children:[/*#__PURE__*/_jsx(FiChevronLeft,{}),\" Back to Users\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-rose-100 p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-amber-900/80\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-rose-800\",children:userId})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-amber-900/80\",children:\"Items in Cart\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-rose-800\",children:cartItems.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-rose-100\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-rose-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Product ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Final Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-amber-900 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-rose-50\",children:cartItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-rose-50/50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\",children:item.product._id}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\",children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\",children:item.product.price.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\",children:[\"$\",(item.product.price*item.quantity).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"text-amber-600 hover:text-amber-800\",children:/*#__PURE__*/_jsx(FiEdit,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"text-rose-600 hover:text-rose-800\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})]},item._id))})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","FiEdit","FiTrash2","FiChevronLeft","Link","useParams","jsx","_jsx","jsxs","_jsxs","UserCart","userId","cartItems","setCartItems","loading","setLoading","error","setError","token","localStorage","getItem","fetchCart","data","get","concat","process","env","REACT_APP_API_URL","headers","Authorization","items","_error$response","_error$response$data","response","message","children","className","to","length","map","item","product","_id","name","price","toFixed","quantity"],"sources":["E:/projects/web/my-app/Frontend/src/admin/users/UserCart.jsx"],"sourcesContent":["// Path: frontend/src/admin/pages/users/UserCart.jsx\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  FiEdit,\r\n  FiTrash2,\r\n  FiChevronLeft,\r\n} from \"react-icons/fi\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n\r\nexport default function UserCart() {\r\n  const { userId } = useParams();\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const token = localStorage.getItem(\"adminToken\");\r\n\r\n  useEffect(() => {\r\n    const fetchCart = async () => {\r\n      try {\r\n        setLoading(true); // Set loading to true before API call\r\n        const { data } = await axios.get(\r\n          `${process.env.REACT_APP_API_URL}/api/admin/users/${userId}/cart`, // Correct path\r\n          {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }\r\n        );\r\n        setCartItems(data.items);\r\n        setError(\"\"); // Clear previous errors\r\n      } catch (error) {\r\n        setError(error.response?.data?.message || \"Failed to fetch cart.\");\r\n      } finally {\r\n        setLoading(false); // Ensure loading stops\r\n      }\r\n    };\r\n\r\n    fetchCart();\r\n  }, [userId, token]);\r\n\r\n  if (loading) return <p>Loading cart...</p>;\r\n  if (error) return <p className=\"text-red-500\">{error}</p>;\r\n\r\n  return (\r\n    <div className=\"p-6 bg-rose-25 ml-64\">\r\n      {/* Header with back button */}\r\n      <div className=\"mb-6\">\r\n        <Link\r\n          to={`/admin/users`}\r\n          className=\"flex items-center gap-2 text-amber-900 hover:text-rose-800\"\r\n        >\r\n          <FiChevronLeft /> Back to Users\r\n        </Link>\r\n      </div>\r\n\r\n      {/* User Summary */}\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-rose-100 p-6 mb-8\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-amber-900/80\">User ID</p>\r\n            <p className=\"font-medium text-rose-800\">{userId}</p>\r\n          </div>\r\n          {/* <div>\r\n            <p className=\"text-sm text-amber-900/80\">Name</p>\r\n            <p className=\"font-medium text-rose-800\">{user.name}</p>\r\n          </div> */}\r\n          <div>\r\n            <p className=\"text-sm text-amber-900/80\">Items in Cart</p>\r\n            <p className=\"font-medium text-rose-800\">{cartItems.length}</p>\r\n          </div>\r\n          {/* <div>\r\n            <p className=\"text-sm text-amber-900/80\">Total Amount</p>\r\n            <p className=\"font-medium text-rose-800\">{user.totalAmount}</p>\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Cart Products Table */}\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden\">\r\n        <table className=\"min-w-full divide-y divide-rose-100\">\r\n          <thead className=\"bg-rose-50\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Product ID\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Name\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Price\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Quantity\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Final Price\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-amber-900 uppercase tracking-wider\">\r\n                Actions\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-rose-50\">\r\n            {cartItems.map((item) => (\r\n              <tr key={item._id} className=\"hover:bg-rose-50/50\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\">\r\n                  {item.product._id}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\">\r\n                  {item.product.name}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\">\r\n                  {item.product.price.toFixed(2)}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\">\r\n                  {item.quantity}\r\n                </td>\r\n                {/* <td className=\"px-6 py-4 whitespace-nowrap text-sm text-amber-900\">\r\n                  <select \r\n                    defaultValue={product.quantity}\r\n                    className=\"border border-rose-200 rounded px-2 py-1 text-sm\"\r\n                  >\r\n                    {[1, 2, 3, 4, 5].map(num => (\r\n                      <option key={num} value={num}>{num}</option>\r\n                    ))}\r\n                  </select>\r\n                </td> */}\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-rose-800\">\r\n                  ${(item.product.price * item.quantity).toFixed(2)}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2\">\r\n                  <button className=\"text-amber-600 hover:text-amber-800\">\r\n                    <FiEdit />\r\n                  </button>\r\n                  <button className=\"text-rose-600 hover:text-rose-800\">\r\n                    <FiTrash2 />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}